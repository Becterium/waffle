syntax = "proto3";

package waffle.v1;

import "google/api/annotations.proto";

option go_package = "api/media/service/v1;v1";
option java_multiple_files = true;
option java_package = "dev.waffle.api.media.v1";
option java_outer_classname = "MediaProtoV1";

service Media{
  rpc UploadImage(UploadImageReq)returns(UploadImageReply){
  }
  rpc VerifyUploadImage(VerifyUploadImageReq)returns(VerifyUploadImageReply){
  }
  rpc GetImage(GetImageReq)returns(GetImageReply){
  }
  rpc UploadVideo(UpLoadVideoReq)returns(UpLoadVideoReply){
  }
  rpc GetVideo(GetVideoReq)returns(GetVideoReply){
  }
}

message UploadImageReq {
  string category = 1;
  string purity = 2;
  repeated int64 tags = 3;
}

message UploadImageReply{
  string upload_url = 1;
  string image_url = 2;
}

message VerifyUploadImageReq{
  string image_url = 1;
}

message VerifyUploadImageReply{
  bool success = 1;
  string message = 2;
}

message GetImageReq{
  string image_url = 1;
}

message GetImageReply{
  repeated string tags = 1;
  string uploader = 2;//user URL
  string category = 3;
  string purity = 4;
  int64 size = 5;
  int64 views = 6;
  int64 favorites = 7;
  string link = 8;//image_URL
  string Thumbnail = 9;//image_UUID
}

message UpLoadVideoReq{
  string video_name = 1;
  bytes video_data = 2;
  string video_type = 3;
}

message UpLoadVideoReply{
  string url = 1;
  bool success = 2;
  string message = 3;
}
//todo: Need to define
message GetVideoReq{}

message GetVideoReply{}